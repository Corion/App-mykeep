{"version":3,"file":"workbox-background-sync.prod.js","sources":["packages/workbox-background-sync/_version.mjs","packages/workbox-background-sync/models/StorableRequest.mjs","packages/workbox-background-sync/models/QueueStore.mjs","packages/workbox-background-sync/utils/constants.mjs","packages/workbox-background-sync/Queue.mjs","packages/workbox-background-sync/QueuePlugin.mjs"],"sourcesContent":["try{self.workbox.v['workbox:background-sync:3.0.0-alpha.1']=1;}catch(e){} // eslint-disable-line","/*\n Copyright 2017 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport '../_version.mjs';\n\nconst serializableProperties = [\n  'method',\n  'referrer',\n  'referrerPolicy',\n  'mode',\n  'credentials',\n  'cache',\n  'redirect',\n  'integrity',\n  'keepalive',\n  'signal',\n];\n\n\n/**\n * A class to make it easier to serialize and de-serialize requests so they\n * can be stored in IndexedDB.\n *\n * @private\n */\nexport default class StorableRequest {\n  /**\n   * Converts a Request object to a plain object that can be structured\n   * cloned or JSON-stringified.\n   *\n   * @param {Request} request\n   * @return {Promise<StorableRequest>}\n   */\n  static async fromRequest(request) {\n    const requestInit = {headers: {}};\n\n    // Set the body if present.\n    if (request.method !== 'GET') {\n      // Use blob to support non-text request bodies,\n      // and clone first in case the caller still needs the request.\n      requestInit.body = await request.clone().blob();\n    }\n\n    // Convert the headers from an iterable to an object.\n    for (const [key, value] of request.headers.entries()) {\n      requestInit.headers[key] = value;\n    }\n\n    // Add all other serializable request properties\n    for (const prop of serializableProperties) {\n      if (request[prop] !== undefined) {\n        requestInit[prop] = request[prop];\n      }\n    }\n\n    return new StorableRequest({url: request.url, requestInit});\n  }\n\n  /**\n   * Accepts a URL and RequestInit dictionary that can be used to create a\n   * new Request object. A timestamp is also generated so consumers can\n   * reference when the object was created.\n   *\n   * @param {Object} param1\n   * @param {string} param1.url\n   * @param {Object} param1.requestInit\n   *     See: https://fetch.spec.whatwg.org/#requestinit\n   * @param {number} param1.timestamp The time the request was created,\n   *     defaulting to the current time if not specified.\n   */\n  constructor({url, requestInit, timestamp = Date.now()}) {\n    this.url = url;\n    this.requestInit = requestInit;\n\n    // \"Private\"\n    this._timestamp = timestamp;\n  }\n\n  /**\n   * Gets the private _timestamp property.\n   *\n   * @return {number}\n   */\n  get timestamp() {\n    return this._timestamp;\n  }\n\n  /**\n   * Coverts this instance to a plain Object.\n   *\n   * @return {Object}\n   */\n  toObject() {\n    return {\n      url: this.url,\n      timestamp: this.timestamp,\n      requestInit: this.requestInit,\n    };\n  }\n\n  /**\n   * Converts this instance to a Request.\n   *\n   * @return {Request}\n   */\n  toRequest() {\n    return new Request(this.url, this.requestInit);\n  }\n}\n","/*\n Copyright 2017 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DBWrapper} from 'workbox-core/_private/DBWrapper.mjs';\nimport StorableRequest from './StorableRequest.mjs';\nimport {DB_NAME, OBJECT_STORE_NAME, INDEXED_PROP} from '../utils/constants.mjs';\nimport '../_version.mjs';\n\n/**\n * A class to manage storing requests from a Queue in IndexedbDB,\n * indexed by their queue name for easier access.\n *\n * @private\n */\nexport class QueueStore {\n  /**\n   * Associates this instance with a Queue instance, so entries added can be\n   * identified by their queue name.\n   *\n   * @param {Queue} queue\n   *\n   * @private\n   */\n  constructor(queue) {\n    this._queue = queue;\n    this._db = new DBWrapper(DB_NAME, 1, {\n      onupgradeneeded: (evt) => evt.target.result\n          .createObjectStore(OBJECT_STORE_NAME, {autoIncrement: true})\n          .createIndex(INDEXED_PROP, INDEXED_PROP, {unique: false}),\n    });\n  }\n\n  /**\n   * Takes a StorableRequest instance, converts it to an object and adds it\n   * as an entry in the object store.\n   *\n   * @param {StorableRequest} storableRequest\n   *\n   * @private\n   */\n  async addEntry(storableRequest) {\n    await this._db.add(OBJECT_STORE_NAME, {\n      queueName: this._queue.name,\n      storableRequest: storableRequest.toObject(),\n    });\n  }\n\n  /**\n   * Gets the oldest entry in the object store, removes it, and returns the\n   * value as a StorableRequest instance. If no entry exists, it returns\n   * undefined.\n   *\n   * @return {StorableRequest|undefined}\n   *\n   * @private\n   */\n  async getAndRemoveOldestEntry() {\n    const [entry] = await this._db.getAllMatching(OBJECT_STORE_NAME, {\n      index: INDEXED_PROP,\n      query: IDBKeyRange.only(this._queue.name),\n      count: 1,\n      includeKeys: true,\n    });\n\n    if (entry) {\n      await this._db.delete(OBJECT_STORE_NAME, entry.primaryKey);\n      return new StorableRequest(entry.value.storableRequest);\n    }\n  }\n}\n","/*\n Copyright 2017 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport '../_version.mjs';\n\nexport const DB_NAME = 'workbox-background-sync';\nexport const OBJECT_STORE_NAME = 'requests';\nexport const INDEXED_PROP = 'queueName';\nexport const TAG_PREFIX = 'workbox-background-sync';\nexport const MAX_RETENTION_TIME = 1000 * 60 * 60 * 24 * 7; // 7 days\n","/*\n Copyright 2017 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {WorkboxError} from 'workbox-core/_private/WorkboxError.mjs';\nimport {QueueStore} from './models/QueueStore.mjs';\nimport StorableRequest from './models/StorableRequest.mjs';\nimport {TAG_PREFIX, MAX_RETENTION_TIME} from './utils/constants.mjs';\nimport './_version.mjs';\n\nconst queueNames = new Set();\n\n\n/**\n * A class to manage storing failed requests in IndexedDB and retrying them\n * later. All parts of the storing and replaying process are observable via\n * callbacks.\n *\n * @memberof workbox.backgroundSync\n */\nclass Queue {\n  /**\n   * Creates an instance of Queue with the given options\n   *\n   * @param {string} name The unique name for this queue. This name must be\n   *     unique as it's used to register sync events and store requests\n   *     in IndexedDB specific to this instance. An error will be thrown if\n   *     a duplicate name is detected.\n   * @param {Object} [options]\n   * @param {Object} [options.callbacks] Callbacks to observe the lifecycle of\n   *     queued requests. Use these to respond to or modify the requests\n   *     during the replay process.\n   * @param {function(StorableRequest):undefined}\n   *     [options.callbacks.requestWillEnqueue]\n   *     Invoked immediately before the request is stored to IndexedDB. Use\n   *     this callback to modify request data at store time.\n   * @param {function(StorableRequest):undefined}\n   *     [options.callbacks.requestWillReplay]\n   *     Invoked immediately before the request is re-fetched. Use this\n   *     callback to modify request data at fetch time.\n   * @param {function(Array<StorableRequest>):undefined}\n   *     [options.callbacks.queueDidReplay]\n   *     Invoked after all requests in the queue have successfully replayed.\n   * @param {number} [options.maxRetentionTime = 7 days] The amount of time (in\n   *     ms) a request may be retried. After this amount of time has passed,\n   *     the request will be deleted from the queue.\n   */\n  constructor(name, {\n    callbacks = {},\n    maxRetentionTime = MAX_RETENTION_TIME,\n  } = {}) {\n    // Ensure the store name is not already being used\n    if (queueNames.has(name)) {\n      throw new WorkboxError('duplicate-queue-name', {name});\n    } else {\n      queueNames.add(name);\n    }\n\n    this._name = name;\n    this._callbacks = callbacks;\n    this._maxRetentionTime = maxRetentionTime;\n    this._queueStore = new QueueStore(this);\n\n    this._addSyncListener();\n  }\n\n  /**\n   * @return {string}\n   */\n  get name() {\n    return this._name;\n  }\n\n  /**\n   * Stores the passed request into IndexedDB. The database used is\n   * `workbox-background-sync` and the object store name is the same as\n   * the name this instance was created with (to guarantee it's unique).\n   *\n   * @param {Request} request The request object to store.\n   */\n  async addRequest(request) {\n    const storableRequest = await StorableRequest.fromRequest(request.clone());\n\n    await this._runCallback('requestWillEnqueue', storableRequest);\n\n    await this._queueStore.addEntry(storableRequest);\n    await this._registerSync();\n  }\n\n  /**\n   * Retrieves all stored requests in IndexedDB and retries them. If the\n   * queue contained requests that were successfully replayed, the\n   * `queueDidReplay` callback is invoked (which implies the queue is\n   * now empty). If any of the requests fail, a new sync registration is\n   * created to retry again later.\n   */\n  async replayRequests() {\n    const now = Date.now();\n    const replayedRequests = [];\n    const failedRequests = [];\n\n    let storableRequest;\n    while (storableRequest = await this._queueStore.getAndRemoveOldestEntry()) {\n      // Ignore requests older than maxRetentionTime.\n      if (now - storableRequest.timestamp > this._maxRetentionTime) {\n        continue;\n      }\n\n      await this._runCallback('requestWillReplay', storableRequest);\n\n      const replay = {request: storableRequest.toRequest()};\n\n      try {\n        // Clone the request before fetching so callbacks get an unused one.\n        replay.response = await fetch(replay.request.clone());\n      } catch (err) {\n        replay.error = err;\n        failedRequests.push(storableRequest);\n      }\n\n      replayedRequests.push(replay);\n    }\n\n    // If any requests failed, put the failed requests back in the queue\n    // and register for another sync.\n    if (failedRequests.length) {\n      await Promise.all(failedRequests.map((storableRequest) => {\n        return this._queueStore.addEntry(storableRequest);\n      }));\n\n      await this._registerSync();\n    }\n\n    await this._runCallback('queueDidReplay', replayedRequests);\n  }\n\n  /**\n   * Runs the passed callback if it exists.\n   *\n   * @private\n   * @param {string} name The name of the callback on this._callbacks.\n   * @param {...*} args The arguments to invoke the callback with.\n   */\n  async _runCallback(name, ...args) {\n    if (typeof this._callbacks[name] === 'function') {\n      await this._callbacks[name].apply(null, args);\n    }\n  }\n\n  /**\n   * In sync-supporting browsers, this adds a listener for the sync event.\n   * In non-sync-supporting browsers, this will retry the queue on service\n   * worker startup.\n   *\n   * @private\n   */\n  _addSyncListener() {\n    if ('sync' in registration) {\n      self.addEventListener('sync', (event) => {\n        event.waitUntil(this.replayRequests());\n      });\n    } else {\n      // If the browser doesn't support background sync, retry\n      // every time the service worker starts up as a fallback.\n      this.replayRequests();\n    }\n  }\n\n  /**\n   * Registers a sync event with a tag unique to this instance.\n   *\n   * @private\n   */\n  async _registerSync() {\n    try {\n      await registration.sync.register(`${TAG_PREFIX}:${this._name}`);\n    } catch (err) {\n      // This means the registration failed for some reason, either because\n      // the browser doesn't supported it or because the user has disabled it.\n      // In either case, do nothing.\n    }\n  }\n\n  /**\n   * Returns the set of queue names. This is primarily used to reset the list\n   * of queue names in tests.\n   *\n   * @return {Set}\n   *\n   * @private\n   */\n  static get _queueNames() {\n    return queueNames;\n  }\n}\n\nexport {Queue};\n","/*\n Copyright 2017 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport './_version.mjs';\n\n/**\n * A class implementing the `fetchDidFail` lifecycle callback. This makes it\n * easier to add failed requests to a background sync Queue.\n *\n * @memberof workbox.backgroundSync\n */\nclass QueuePlugin {\n  /**\n   * @param {Queue} queue The Queue instance to add failed requests to.\n   */\n  constructor(queue) {\n    this._queue = queue;\n    this.fetchDidFail = this.fetchDidFail.bind(this);\n  }\n\n  /**\n   * @param {Object} options\n   * @param {Request} options.request\n   * @private\n   */\n  async fetchDidFail({request}) {\n    await this._queue.addRequest(request);\n  }\n}\n\nexport {QueuePlugin};\n"],"names":["workbox","v","e","serializableProperties","StorableRequest","request","requestInit","headers","method","body","clone","blob","key","value","entries","prop","undefined","url","timestamp","Date","now","_timestamp","this","Request","QueueStore","queue","_queue","_db","DBWrapper","evt","target","result","createObjectStore","autoIncrement","createIndex","unique","storableRequest","_this","add","name","toObject","entry","_this2","getAllMatching","IDBKeyRange","only","delete","primaryKey","queueNames","Set","Queue","callbacks","maxRetentionTime","has","WorkboxError","_name","_callbacks","_maxRetentionTime","_queueStore","_addSyncListener","fromRequest","_runCallback","addEntry","_registerSync","replayedRequests","failedRequests","getAndRemoveOldestEntry","replay","toRequest","response","fetch","err","error","push","length","Promise","all","map","args","_this3","apply","registration","addEventListener","event","waitUntil","replayRequests","sync","register","_this4","QueuePlugin","fetchDidFail","bind","addRequest"],"mappings":"qFAAA,SAASA,QAAQC,EAAE,yCAAyC,EAAG,MAAMC,ICerE,MAEMC,GACJ,SACA,WACA,iBACA,OACA,cACA,QACA,WACA,YACA,YACA,gBAUmBC,qBAQMC,0DACjBC,GAAeC,YAGE,QAAnBF,EAAQG,WAGEC,WAAaJ,EAAQK,QAAQC,YAItC,MAAOC,EAAKC,KAAUR,EAAQE,QAAQO,YAC7BP,QAAQK,GAAOC,MAIxB,MAAME,KAAQZ,OACKa,IAAlBX,EAAQU,OACEA,GAAQV,EAAQU,WAIzB,IAAIX,GAAiBa,IAAKZ,EAAQY,IAAKX,YAAAA,qBAepCW,IAACA,EAADX,YAAMA,EAANY,UAAmBA,EAAYC,KAAKC,aACzCH,IAAMA,OACNX,YAAcA,OAGde,EAAaH,yBASXI,KAAKD,wBAULC,KAAKL,cACCK,KAAKJ,sBACHI,KAAKhB,gCAUb,IAAIiB,QAAQD,KAAKL,IAAKK,KAAKhB,oBC5FzBkB,cASCC,QACLC,EAASD,OACTE,EAAM,IAAIC,YCpBI,0BDoBe,mBACdC,GAAQA,EAAIC,OAAOC,OAChCC,kBCrBsB,YDqBgBC,eAAe,IACrDC,YCrBiB,YAAA,aDqBwBC,QAAQ,eAY3CC,qEACPC,EAAKV,EAAIW,ICnCc,sBDoChBD,EAAKX,EAAOa,qBACNH,EAAgBI,6GAc5BC,SAAeC,EAAKf,EAAIgB,eCnDF,kBACL,kBDoDfC,YAAYC,KAAKH,EAAKhB,EAAOa,YAC7B,eACM,OAGXE,eACIC,EAAKf,EAAImB,OC3DY,WD2DcL,EAAMM,YACxC,IAAI3C,EAAgBqC,EAAM5B,MAAMuB,sBE/D7C,MAMMY,EAAa,IAAIC,UAUjBC,cA2BQX,GAAMY,eAAAC,mBDrCc,eC0C1BJ,EAAWK,IAAId,SACX,IAAIe,eAAa,wBAAyBf,KAAAA,MAErCD,IAAIC,QAGZgB,EAAQhB,OACRiB,EAAaL,OACbM,EAAoBL,OACpBM,EAAc,IAAIlC,EAAWF,WAE7BqC,sBAOErC,KAAKiC,aAUGlD,qEACT+B,QAAwBhC,EAAgBwD,YAAYvD,EAAQK,eAE5D2B,EAAKwB,EAAa,qBAAsBzB,SAExCC,EAAKqB,EAAYI,SAAS1B,SAC1BC,EAAK0B,2FAWL3C,EAAMD,KAAKC,MACX4C,KACAC,SAEF7B,OACGA,QAAwBM,EAAKgB,EAAYQ,2BAA2B,IAErE9C,EAAMgB,EAAgBlB,UAAYwB,EAAKe,iBAIrCf,EAAKmB,EAAa,oBAAqBzB,SAEvC+B,GAAU9D,QAAS+B,EAAgBgC,mBAIhCC,eAAiBC,MAAMH,EAAO9D,QAAQK,SAC7C,MAAO6D,KACAC,MAAQD,IACAE,KAAKrC,KAGLqC,KAAKN,GAKpBF,EAAeS,eACXC,QAAQC,IAAIX,EAAeY,IAAI,SAACzC,UAC7BM,EAAKgB,EAAYI,SAAS1B,YAG7BM,EAAKqB,WAGPrB,EAAKmB,EAAa,iBAAkBG,SAUzBzB,KAASuC,+DACW,mBAA1BC,EAAKvB,EAAWjB,WACnBwC,EAAKvB,EAAWjB,GAAMyC,MAAM,KAAMF,YAYtC,SAAUG,kBACPC,iBAAiB,OAASC,MACvBC,UAAU9D,KAAK+D,yBAKlBA,2FAWCJ,aAAaK,KAAKC,oCAA0BC,EAAKjC,KACvD,MAAOgB,+BAgBFvB,SCpLLyC,cAIQhE,QACLC,EAASD,OACTiE,aAAepE,KAAKoE,aAAaC,KAAKrE,oBAQ1BjB,QAACA,sEACZgC,EAAKX,EAAOkE,WAAWvF","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0Z2F1bnQvUHJvamVjdHMvQ29kZS93b3JrYm94L2dlbmVyYXRlZC1yZWxlYXNlLWZpbGVzL3YzLjAuMC1hbHBoYS4xL3NvdXJjZS1jb2RlL3BhY2thZ2VzL3dvcmtib3gtYmFja2dyb3VuZC1zeW5jL192ZXJzaW9uLm1qcyIsIi9Vc2Vycy9tYXR0Z2F1bnQvUHJvamVjdHMvQ29kZS93b3JrYm94L2dlbmVyYXRlZC1yZWxlYXNlLWZpbGVzL3YzLjAuMC1hbHBoYS4xL3NvdXJjZS1jb2RlL3BhY2thZ2VzL3dvcmtib3gtYmFja2dyb3VuZC1zeW5jL21vZGVscy9TdG9yYWJsZVJlcXVlc3QubWpzIiwiL1VzZXJzL21hdHRnYXVudC9Qcm9qZWN0cy9Db2RlL3dvcmtib3gvZ2VuZXJhdGVkLXJlbGVhc2UtZmlsZXMvdjMuMC4wLWFscGhhLjEvc291cmNlLWNvZGUvcGFja2FnZXMvd29ya2JveC1iYWNrZ3JvdW5kLXN5bmMvbW9kZWxzL1F1ZXVlU3RvcmUubWpzIiwiL1VzZXJzL21hdHRnYXVudC9Qcm9qZWN0cy9Db2RlL3dvcmtib3gvZ2VuZXJhdGVkLXJlbGVhc2UtZmlsZXMvdjMuMC4wLWFscGhhLjEvc291cmNlLWNvZGUvcGFja2FnZXMvd29ya2JveC1iYWNrZ3JvdW5kLXN5bmMvdXRpbHMvY29uc3RhbnRzLm1qcyIsIi9Vc2Vycy9tYXR0Z2F1bnQvUHJvamVjdHMvQ29kZS93b3JrYm94L2dlbmVyYXRlZC1yZWxlYXNlLWZpbGVzL3YzLjAuMC1hbHBoYS4xL3NvdXJjZS1jb2RlL3BhY2thZ2VzL3dvcmtib3gtYmFja2dyb3VuZC1zeW5jL1F1ZXVlLm1qcyIsIi9Vc2Vycy9tYXR0Z2F1bnQvUHJvamVjdHMvQ29kZS93b3JrYm94L2dlbmVyYXRlZC1yZWxlYXNlLWZpbGVzL3YzLjAuMC1hbHBoYS4xL3NvdXJjZS1jb2RlL3BhY2thZ2VzL3dvcmtib3gtYmFja2dyb3VuZC1zeW5jL1F1ZXVlUGx1Z2luLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0cnl7c2VsZi53b3JrYm94LnZbJ3dvcmtib3g6YmFja2dyb3VuZC1zeW5jOjMuMC4wLWFscGhhLjEnXT0xO31jYXRjaChlKXt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUiLCIvKlxuIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCAnLi4vX3ZlcnNpb24ubWpzJztcblxuY29uc3Qgc2VyaWFsaXphYmxlUHJvcGVydGllcyA9IFtcbiAgJ21ldGhvZCcsXG4gICdyZWZlcnJlcicsXG4gICdyZWZlcnJlclBvbGljeScsXG4gICdtb2RlJyxcbiAgJ2NyZWRlbnRpYWxzJyxcbiAgJ2NhY2hlJyxcbiAgJ3JlZGlyZWN0JyxcbiAgJ2ludGVncml0eScsXG4gICdrZWVwYWxpdmUnLFxuICAnc2lnbmFsJyxcbl07XG5cblxuLyoqXG4gKiBBIGNsYXNzIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHNlcmlhbGl6ZSBhbmQgZGUtc2VyaWFsaXplIHJlcXVlc3RzIHNvIHRoZXlcbiAqIGNhbiBiZSBzdG9yZWQgaW4gSW5kZXhlZERCLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhYmxlUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIFJlcXVlc3Qgb2JqZWN0IHRvIGEgcGxhaW4gb2JqZWN0IHRoYXQgY2FuIGJlIHN0cnVjdHVyZWRcbiAgICogY2xvbmVkIG9yIEpTT04tc3RyaW5naWZpZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdFxuICAgKiBAcmV0dXJuIHtQcm9taXNlPFN0b3JhYmxlUmVxdWVzdD59XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHJlcXVlc3RJbml0ID0ge2hlYWRlcnM6IHt9fTtcblxuICAgIC8vIFNldCB0aGUgYm9keSBpZiBwcmVzZW50LlxuICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICAgIC8vIFVzZSBibG9iIHRvIHN1cHBvcnQgbm9uLXRleHQgcmVxdWVzdCBib2RpZXMsXG4gICAgICAvLyBhbmQgY2xvbmUgZmlyc3QgaW4gY2FzZSB0aGUgY2FsbGVyIHN0aWxsIG5lZWRzIHRoZSByZXF1ZXN0LlxuICAgICAgcmVxdWVzdEluaXQuYm9keSA9IGF3YWl0IHJlcXVlc3QuY2xvbmUoKS5ibG9iKCk7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCB0aGUgaGVhZGVycyBmcm9tIGFuIGl0ZXJhYmxlIHRvIGFuIG9iamVjdC5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiByZXF1ZXN0LmhlYWRlcnMuZW50cmllcygpKSB7XG4gICAgICByZXF1ZXN0SW5pdC5oZWFkZXJzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgYWxsIG90aGVyIHNlcmlhbGl6YWJsZSByZXF1ZXN0IHByb3BlcnRpZXNcbiAgICBmb3IgKGNvbnN0IHByb3Agb2Ygc2VyaWFsaXphYmxlUHJvcGVydGllcykge1xuICAgICAgaWYgKHJlcXVlc3RbcHJvcF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXF1ZXN0SW5pdFtwcm9wXSA9IHJlcXVlc3RbcHJvcF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBTdG9yYWJsZVJlcXVlc3Qoe3VybDogcmVxdWVzdC51cmwsIHJlcXVlc3RJbml0fSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyBhIFVSTCBhbmQgUmVxdWVzdEluaXQgZGljdGlvbmFyeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBhXG4gICAqIG5ldyBSZXF1ZXN0IG9iamVjdC4gQSB0aW1lc3RhbXAgaXMgYWxzbyBnZW5lcmF0ZWQgc28gY29uc3VtZXJzIGNhblxuICAgKiByZWZlcmVuY2Ugd2hlbiB0aGUgb2JqZWN0IHdhcyBjcmVhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW0xXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbTEudXJsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbTEucmVxdWVzdEluaXRcbiAgICogICAgIFNlZTogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI3JlcXVlc3Rpbml0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYXJhbTEudGltZXN0YW1wIFRoZSB0aW1lIHRoZSByZXF1ZXN0IHdhcyBjcmVhdGVkLFxuICAgKiAgICAgZGVmYXVsdGluZyB0byB0aGUgY3VycmVudCB0aW1lIGlmIG5vdCBzcGVjaWZpZWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7dXJsLCByZXF1ZXN0SW5pdCwgdGltZXN0YW1wID0gRGF0ZS5ub3coKX0pIHtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLnJlcXVlc3RJbml0ID0gcmVxdWVzdEluaXQ7XG5cbiAgICAvLyBcIlByaXZhdGVcIlxuICAgIHRoaXMuX3RpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcml2YXRlIF90aW1lc3RhbXAgcHJvcGVydHkuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCB0aW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpbWVzdGFtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3ZlcnRzIHRoaXMgaW5zdGFuY2UgdG8gYSBwbGFpbiBPYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvT2JqZWN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgdGltZXN0YW1wOiB0aGlzLnRpbWVzdGFtcCxcbiAgICAgIHJlcXVlc3RJbml0OiB0aGlzLnJlcXVlc3RJbml0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyBpbnN0YW5jZSB0byBhIFJlcXVlc3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1JlcXVlc3R9XG4gICAqL1xuICB0b1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMudXJsLCB0aGlzLnJlcXVlc3RJbml0KTtcbiAgfVxufVxuIiwiLypcbiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQge0RCV3JhcHBlcn0gZnJvbSAnd29ya2JveC1jb3JlL19wcml2YXRlL0RCV3JhcHBlci5tanMnO1xuaW1wb3J0IFN0b3JhYmxlUmVxdWVzdCBmcm9tICcuL1N0b3JhYmxlUmVxdWVzdC5tanMnO1xuaW1wb3J0IHtEQl9OQU1FLCBPQkpFQ1RfU1RPUkVfTkFNRSwgSU5ERVhFRF9QUk9QfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMubWpzJztcbmltcG9ydCAnLi4vX3ZlcnNpb24ubWpzJztcblxuLyoqXG4gKiBBIGNsYXNzIHRvIG1hbmFnZSBzdG9yaW5nIHJlcXVlc3RzIGZyb20gYSBRdWV1ZSBpbiBJbmRleGVkYkRCLFxuICogaW5kZXhlZCBieSB0aGVpciBxdWV1ZSBuYW1lIGZvciBlYXNpZXIgYWNjZXNzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWV1ZVN0b3JlIHtcbiAgLyoqXG4gICAqIEFzc29jaWF0ZXMgdGhpcyBpbnN0YW5jZSB3aXRoIGEgUXVldWUgaW5zdGFuY2UsIHNvIGVudHJpZXMgYWRkZWQgY2FuIGJlXG4gICAqIGlkZW50aWZpZWQgYnkgdGhlaXIgcXVldWUgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtRdWV1ZX0gcXVldWVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHF1ZXVlKSB7XG4gICAgdGhpcy5fcXVldWUgPSBxdWV1ZTtcbiAgICB0aGlzLl9kYiA9IG5ldyBEQldyYXBwZXIoREJfTkFNRSwgMSwge1xuICAgICAgb251cGdyYWRlbmVlZGVkOiAoZXZ0KSA9PiBldnQudGFyZ2V0LnJlc3VsdFxuICAgICAgICAgIC5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSwge2F1dG9JbmNyZW1lbnQ6IHRydWV9KVxuICAgICAgICAgIC5jcmVhdGVJbmRleChJTkRFWEVEX1BST1AsIElOREVYRURfUFJPUCwge3VuaXF1ZTogZmFsc2V9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIFN0b3JhYmxlUmVxdWVzdCBpbnN0YW5jZSwgY29udmVydHMgaXQgdG8gYW4gb2JqZWN0IGFuZCBhZGRzIGl0XG4gICAqIGFzIGFuIGVudHJ5IGluIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RvcmFibGVSZXF1ZXN0fSBzdG9yYWJsZVJlcXVlc3RcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIGFkZEVudHJ5KHN0b3JhYmxlUmVxdWVzdCkge1xuICAgIGF3YWl0IHRoaXMuX2RiLmFkZChPQkpFQ1RfU1RPUkVfTkFNRSwge1xuICAgICAgcXVldWVOYW1lOiB0aGlzLl9xdWV1ZS5uYW1lLFxuICAgICAgc3RvcmFibGVSZXF1ZXN0OiBzdG9yYWJsZVJlcXVlc3QudG9PYmplY3QoKSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBvbGRlc3QgZW50cnkgaW4gdGhlIG9iamVjdCBzdG9yZSwgcmVtb3ZlcyBpdCwgYW5kIHJldHVybnMgdGhlXG4gICAqIHZhbHVlIGFzIGEgU3RvcmFibGVSZXF1ZXN0IGluc3RhbmNlLiBJZiBubyBlbnRyeSBleGlzdHMsIGl0IHJldHVybnNcbiAgICogdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdG9yYWJsZVJlcXVlc3R8dW5kZWZpbmVkfVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgZ2V0QW5kUmVtb3ZlT2xkZXN0RW50cnkoKSB7XG4gICAgY29uc3QgW2VudHJ5XSA9IGF3YWl0IHRoaXMuX2RiLmdldEFsbE1hdGNoaW5nKE9CSkVDVF9TVE9SRV9OQU1FLCB7XG4gICAgICBpbmRleDogSU5ERVhFRF9QUk9QLFxuICAgICAgcXVlcnk6IElEQktleVJhbmdlLm9ubHkodGhpcy5fcXVldWUubmFtZSksXG4gICAgICBjb3VudDogMSxcbiAgICAgIGluY2x1ZGVLZXlzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBhd2FpdCB0aGlzLl9kYi5kZWxldGUoT0JKRUNUX1NUT1JFX05BTUUsIGVudHJ5LnByaW1hcnlLZXkpO1xuICAgICAgcmV0dXJuIG5ldyBTdG9yYWJsZVJlcXVlc3QoZW50cnkudmFsdWUuc3RvcmFibGVSZXF1ZXN0KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0ICcuLi9fdmVyc2lvbi5tanMnO1xuXG5leHBvcnQgY29uc3QgREJfTkFNRSA9ICd3b3JrYm94LWJhY2tncm91bmQtc3luYyc7XG5leHBvcnQgY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAncmVxdWVzdHMnO1xuZXhwb3J0IGNvbnN0IElOREVYRURfUFJPUCA9ICdxdWV1ZU5hbWUnO1xuZXhwb3J0IGNvbnN0IFRBR19QUkVGSVggPSAnd29ya2JveC1iYWNrZ3JvdW5kLXN5bmMnO1xuZXhwb3J0IGNvbnN0IE1BWF9SRVRFTlRJT05fVElNRSA9IDEwMDAgKiA2MCAqIDYwICogMjQgKiA3OyAvLyA3IGRheXNcbiIsIi8qXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IHtXb3JrYm94RXJyb3J9IGZyb20gJ3dvcmtib3gtY29yZS9fcHJpdmF0ZS9Xb3JrYm94RXJyb3IubWpzJztcbmltcG9ydCB7UXVldWVTdG9yZX0gZnJvbSAnLi9tb2RlbHMvUXVldWVTdG9yZS5tanMnO1xuaW1wb3J0IFN0b3JhYmxlUmVxdWVzdCBmcm9tICcuL21vZGVscy9TdG9yYWJsZVJlcXVlc3QubWpzJztcbmltcG9ydCB7VEFHX1BSRUZJWCwgTUFYX1JFVEVOVElPTl9USU1FfSBmcm9tICcuL3V0aWxzL2NvbnN0YW50cy5tanMnO1xuaW1wb3J0ICcuL192ZXJzaW9uLm1qcyc7XG5cbmNvbnN0IHF1ZXVlTmFtZXMgPSBuZXcgU2V0KCk7XG5cblxuLyoqXG4gKiBBIGNsYXNzIHRvIG1hbmFnZSBzdG9yaW5nIGZhaWxlZCByZXF1ZXN0cyBpbiBJbmRleGVkREIgYW5kIHJldHJ5aW5nIHRoZW1cbiAqIGxhdGVyLiBBbGwgcGFydHMgb2YgdGhlIHN0b3JpbmcgYW5kIHJlcGxheWluZyBwcm9jZXNzIGFyZSBvYnNlcnZhYmxlIHZpYVxuICogY2FsbGJhY2tzLlxuICpcbiAqIEBtZW1iZXJvZiB3b3JrYm94LmJhY2tncm91bmRTeW5jXG4gKi9cbmNsYXNzIFF1ZXVlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgUXVldWUgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9uc1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgdW5pcXVlIG5hbWUgZm9yIHRoaXMgcXVldWUuIFRoaXMgbmFtZSBtdXN0IGJlXG4gICAqICAgICB1bmlxdWUgYXMgaXQncyB1c2VkIHRvIHJlZ2lzdGVyIHN5bmMgZXZlbnRzIGFuZCBzdG9yZSByZXF1ZXN0c1xuICAgKiAgICAgaW4gSW5kZXhlZERCIHNwZWNpZmljIHRvIHRoaXMgaW5zdGFuY2UuIEFuIGVycm9yIHdpbGwgYmUgdGhyb3duIGlmXG4gICAqICAgICBhIGR1cGxpY2F0ZSBuYW1lIGlzIGRldGVjdGVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5jYWxsYmFja3NdIENhbGxiYWNrcyB0byBvYnNlcnZlIHRoZSBsaWZlY3ljbGUgb2ZcbiAgICogICAgIHF1ZXVlZCByZXF1ZXN0cy4gVXNlIHRoZXNlIHRvIHJlc3BvbmQgdG8gb3IgbW9kaWZ5IHRoZSByZXF1ZXN0c1xuICAgKiAgICAgZHVyaW5nIHRoZSByZXBsYXkgcHJvY2Vzcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihTdG9yYWJsZVJlcXVlc3QpOnVuZGVmaW5lZH1cbiAgICogICAgIFtvcHRpb25zLmNhbGxiYWNrcy5yZXF1ZXN0V2lsbEVucXVldWVdXG4gICAqICAgICBJbnZva2VkIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgcmVxdWVzdCBpcyBzdG9yZWQgdG8gSW5kZXhlZERCLiBVc2VcbiAgICogICAgIHRoaXMgY2FsbGJhY2sgdG8gbW9kaWZ5IHJlcXVlc3QgZGF0YSBhdCBzdG9yZSB0aW1lLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFN0b3JhYmxlUmVxdWVzdCk6dW5kZWZpbmVkfVxuICAgKiAgICAgW29wdGlvbnMuY2FsbGJhY2tzLnJlcXVlc3RXaWxsUmVwbGF5XVxuICAgKiAgICAgSW52b2tlZCBpbW1lZGlhdGVseSBiZWZvcmUgdGhlIHJlcXVlc3QgaXMgcmUtZmV0Y2hlZC4gVXNlIHRoaXNcbiAgICogICAgIGNhbGxiYWNrIHRvIG1vZGlmeSByZXF1ZXN0IGRhdGEgYXQgZmV0Y2ggdGltZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihBcnJheTxTdG9yYWJsZVJlcXVlc3Q+KTp1bmRlZmluZWR9XG4gICAqICAgICBbb3B0aW9ucy5jYWxsYmFja3MucXVldWVEaWRSZXBsYXldXG4gICAqICAgICBJbnZva2VkIGFmdGVyIGFsbCByZXF1ZXN0cyBpbiB0aGUgcXVldWUgaGF2ZSBzdWNjZXNzZnVsbHkgcmVwbGF5ZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhSZXRlbnRpb25UaW1lID0gNyBkYXlzXSBUaGUgYW1vdW50IG9mIHRpbWUgKGluXG4gICAqICAgICBtcykgYSByZXF1ZXN0IG1heSBiZSByZXRyaWVkLiBBZnRlciB0aGlzIGFtb3VudCBvZiB0aW1lIGhhcyBwYXNzZWQsXG4gICAqICAgICB0aGUgcmVxdWVzdCB3aWxsIGJlIGRlbGV0ZWQgZnJvbSB0aGUgcXVldWUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuYW1lLCB7XG4gICAgY2FsbGJhY2tzID0ge30sXG4gICAgbWF4UmV0ZW50aW9uVGltZSA9IE1BWF9SRVRFTlRJT05fVElNRSxcbiAgfSA9IHt9KSB7XG4gICAgLy8gRW5zdXJlIHRoZSBzdG9yZSBuYW1lIGlzIG5vdCBhbHJlYWR5IGJlaW5nIHVzZWRcbiAgICBpZiAocXVldWVOYW1lcy5oYXMobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBXb3JrYm94RXJyb3IoJ2R1cGxpY2F0ZS1xdWV1ZS1uYW1lJywge25hbWV9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcXVldWVOYW1lcy5hZGQobmFtZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgIHRoaXMuX21heFJldGVudGlvblRpbWUgPSBtYXhSZXRlbnRpb25UaW1lO1xuICAgIHRoaXMuX3F1ZXVlU3RvcmUgPSBuZXcgUXVldWVTdG9yZSh0aGlzKTtcblxuICAgIHRoaXMuX2FkZFN5bmNMaXN0ZW5lcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3JlcyB0aGUgcGFzc2VkIHJlcXVlc3QgaW50byBJbmRleGVkREIuIFRoZSBkYXRhYmFzZSB1c2VkIGlzXG4gICAqIGB3b3JrYm94LWJhY2tncm91bmQtc3luY2AgYW5kIHRoZSBvYmplY3Qgc3RvcmUgbmFtZSBpcyB0aGUgc2FtZSBhc1xuICAgKiB0aGUgbmFtZSB0aGlzIGluc3RhbmNlIHdhcyBjcmVhdGVkIHdpdGggKHRvIGd1YXJhbnRlZSBpdCdzIHVuaXF1ZSkuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCBUaGUgcmVxdWVzdCBvYmplY3QgdG8gc3RvcmUuXG4gICAqL1xuICBhc3luYyBhZGRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBzdG9yYWJsZVJlcXVlc3QgPSBhd2FpdCBTdG9yYWJsZVJlcXVlc3QuZnJvbVJlcXVlc3QocmVxdWVzdC5jbG9uZSgpKTtcblxuICAgIGF3YWl0IHRoaXMuX3J1bkNhbGxiYWNrKCdyZXF1ZXN0V2lsbEVucXVldWUnLCBzdG9yYWJsZVJlcXVlc3QpO1xuXG4gICAgYXdhaXQgdGhpcy5fcXVldWVTdG9yZS5hZGRFbnRyeShzdG9yYWJsZVJlcXVlc3QpO1xuICAgIGF3YWl0IHRoaXMuX3JlZ2lzdGVyU3luYygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgc3RvcmVkIHJlcXVlc3RzIGluIEluZGV4ZWREQiBhbmQgcmV0cmllcyB0aGVtLiBJZiB0aGVcbiAgICogcXVldWUgY29udGFpbmVkIHJlcXVlc3RzIHRoYXQgd2VyZSBzdWNjZXNzZnVsbHkgcmVwbGF5ZWQsIHRoZVxuICAgKiBgcXVldWVEaWRSZXBsYXlgIGNhbGxiYWNrIGlzIGludm9rZWQgKHdoaWNoIGltcGxpZXMgdGhlIHF1ZXVlIGlzXG4gICAqIG5vdyBlbXB0eSkuIElmIGFueSBvZiB0aGUgcmVxdWVzdHMgZmFpbCwgYSBuZXcgc3luYyByZWdpc3RyYXRpb24gaXNcbiAgICogY3JlYXRlZCB0byByZXRyeSBhZ2FpbiBsYXRlci5cbiAgICovXG4gIGFzeW5jIHJlcGxheVJlcXVlc3RzKCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcmVwbGF5ZWRSZXF1ZXN0cyA9IFtdO1xuICAgIGNvbnN0IGZhaWxlZFJlcXVlc3RzID0gW107XG5cbiAgICBsZXQgc3RvcmFibGVSZXF1ZXN0O1xuICAgIHdoaWxlIChzdG9yYWJsZVJlcXVlc3QgPSBhd2FpdCB0aGlzLl9xdWV1ZVN0b3JlLmdldEFuZFJlbW92ZU9sZGVzdEVudHJ5KCkpIHtcbiAgICAgIC8vIElnbm9yZSByZXF1ZXN0cyBvbGRlciB0aGFuIG1heFJldGVudGlvblRpbWUuXG4gICAgICBpZiAobm93IC0gc3RvcmFibGVSZXF1ZXN0LnRpbWVzdGFtcCA+IHRoaXMuX21heFJldGVudGlvblRpbWUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuX3J1bkNhbGxiYWNrKCdyZXF1ZXN0V2lsbFJlcGxheScsIHN0b3JhYmxlUmVxdWVzdCk7XG5cbiAgICAgIGNvbnN0IHJlcGxheSA9IHtyZXF1ZXN0OiBzdG9yYWJsZVJlcXVlc3QudG9SZXF1ZXN0KCl9O1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBDbG9uZSB0aGUgcmVxdWVzdCBiZWZvcmUgZmV0Y2hpbmcgc28gY2FsbGJhY2tzIGdldCBhbiB1bnVzZWQgb25lLlxuICAgICAgICByZXBsYXkucmVzcG9uc2UgPSBhd2FpdCBmZXRjaChyZXBsYXkucmVxdWVzdC5jbG9uZSgpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXBsYXkuZXJyb3IgPSBlcnI7XG4gICAgICAgIGZhaWxlZFJlcXVlc3RzLnB1c2goc3RvcmFibGVSZXF1ZXN0KTtcbiAgICAgIH1cblxuICAgICAgcmVwbGF5ZWRSZXF1ZXN0cy5wdXNoKHJlcGxheSk7XG4gICAgfVxuXG4gICAgLy8gSWYgYW55IHJlcXVlc3RzIGZhaWxlZCwgcHV0IHRoZSBmYWlsZWQgcmVxdWVzdHMgYmFjayBpbiB0aGUgcXVldWVcbiAgICAvLyBhbmQgcmVnaXN0ZXIgZm9yIGFub3RoZXIgc3luYy5cbiAgICBpZiAoZmFpbGVkUmVxdWVzdHMubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChmYWlsZWRSZXF1ZXN0cy5tYXAoKHN0b3JhYmxlUmVxdWVzdCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWVTdG9yZS5hZGRFbnRyeShzdG9yYWJsZVJlcXVlc3QpO1xuICAgICAgfSkpO1xuXG4gICAgICBhd2FpdCB0aGlzLl9yZWdpc3RlclN5bmMoKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLl9ydW5DYWxsYmFjaygncXVldWVEaWRSZXBsYXknLCByZXBsYXllZFJlcXVlc3RzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIHRoZSBwYXNzZWQgY2FsbGJhY2sgaWYgaXQgZXhpc3RzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgb24gdGhpcy5fY2FsbGJhY2tzLlxuICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqL1xuICBhc3luYyBfcnVuQ2FsbGJhY2sobmFtZSwgLi4uYXJncykge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fY2FsbGJhY2tzW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhd2FpdCB0aGlzLl9jYWxsYmFja3NbbmFtZV0uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluIHN5bmMtc3VwcG9ydGluZyBicm93c2VycywgdGhpcyBhZGRzIGEgbGlzdGVuZXIgZm9yIHRoZSBzeW5jIGV2ZW50LlxuICAgKiBJbiBub24tc3luYy1zdXBwb3J0aW5nIGJyb3dzZXJzLCB0aGlzIHdpbGwgcmV0cnkgdGhlIHF1ZXVlIG9uIHNlcnZpY2VcbiAgICogd29ya2VyIHN0YXJ0dXAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWRkU3luY0xpc3RlbmVyKCkge1xuICAgIGlmICgnc3luYycgaW4gcmVnaXN0cmF0aW9uKSB7XG4gICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3N5bmMnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQud2FpdFVudGlsKHRoaXMucmVwbGF5UmVxdWVzdHMoKSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGJhY2tncm91bmQgc3luYywgcmV0cnlcbiAgICAgIC8vIGV2ZXJ5IHRpbWUgdGhlIHNlcnZpY2Ugd29ya2VyIHN0YXJ0cyB1cCBhcyBhIGZhbGxiYWNrLlxuICAgICAgdGhpcy5yZXBsYXlSZXF1ZXN0cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBzeW5jIGV2ZW50IHdpdGggYSB0YWcgdW5pcXVlIHRvIHRoaXMgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfcmVnaXN0ZXJTeW5jKCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZWdpc3RyYXRpb24uc3luYy5yZWdpc3RlcihgJHtUQUdfUFJFRklYfToke3RoaXMuX25hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBUaGlzIG1lYW5zIHRoZSByZWdpc3RyYXRpb24gZmFpbGVkIGZvciBzb21lIHJlYXNvbiwgZWl0aGVyIGJlY2F1c2VcbiAgICAgIC8vIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydGVkIGl0IG9yIGJlY2F1c2UgdGhlIHVzZXIgaGFzIGRpc2FibGVkIGl0LlxuICAgICAgLy8gSW4gZWl0aGVyIGNhc2UsIGRvIG5vdGhpbmcuXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNldCBvZiBxdWV1ZSBuYW1lcy4gVGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byByZXNldCB0aGUgbGlzdFxuICAgKiBvZiBxdWV1ZSBuYW1lcyBpbiB0ZXN0cy5cbiAgICpcbiAgICogQHJldHVybiB7U2V0fVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGdldCBfcXVldWVOYW1lcygpIHtcbiAgICByZXR1cm4gcXVldWVOYW1lcztcbiAgfVxufVxuXG5leHBvcnQge1F1ZXVlfTtcbiIsIi8qXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0ICcuL192ZXJzaW9uLm1qcyc7XG5cbi8qKlxuICogQSBjbGFzcyBpbXBsZW1lbnRpbmcgdGhlIGBmZXRjaERpZEZhaWxgIGxpZmVjeWNsZSBjYWxsYmFjay4gVGhpcyBtYWtlcyBpdFxuICogZWFzaWVyIHRvIGFkZCBmYWlsZWQgcmVxdWVzdHMgdG8gYSBiYWNrZ3JvdW5kIHN5bmMgUXVldWUuXG4gKlxuICogQG1lbWJlcm9mIHdvcmtib3guYmFja2dyb3VuZFN5bmNcbiAqL1xuY2xhc3MgUXVldWVQbHVnaW4ge1xuICAvKipcbiAgICogQHBhcmFtIHtRdWV1ZX0gcXVldWUgVGhlIFF1ZXVlIGluc3RhbmNlIHRvIGFkZCBmYWlsZWQgcmVxdWVzdHMgdG8uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihxdWV1ZSkge1xuICAgIHRoaXMuX3F1ZXVlID0gcXVldWU7XG4gICAgdGhpcy5mZXRjaERpZEZhaWwgPSB0aGlzLmZldGNoRGlkRmFpbC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7UmVxdWVzdH0gb3B0aW9ucy5yZXF1ZXN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBmZXRjaERpZEZhaWwoe3JlcXVlc3R9KSB7XG4gICAgYXdhaXQgdGhpcy5fcXVldWUuYWRkUmVxdWVzdChyZXF1ZXN0KTtcbiAgfVxufVxuXG5leHBvcnQge1F1ZXVlUGx1Z2lufTtcbiJdLCJuYW1lcyI6WyJ3b3JrYm94IiwidiIsImUiLCJzZXJpYWxpemFibGVQcm9wZXJ0aWVzIiwiU3RvcmFibGVSZXF1ZXN0IiwicmVxdWVzdCIsInJlcXVlc3RJbml0IiwiaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJjbG9uZSIsImJsb2IiLCJrZXkiLCJ2YWx1ZSIsImVudHJpZXMiLCJwcm9wIiwidW5kZWZpbmVkIiwidXJsIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIl90aW1lc3RhbXAiLCJ0aGlzIiwiUmVxdWVzdCIsIlF1ZXVlU3RvcmUiLCJxdWV1ZSIsIl9xdWV1ZSIsIl9kYiIsIkRCV3JhcHBlciIsImV2dCIsInRhcmdldCIsInJlc3VsdCIsImNyZWF0ZU9iamVjdFN0b3JlIiwiYXV0b0luY3JlbWVudCIsImNyZWF0ZUluZGV4IiwidW5pcXVlIiwic3RvcmFibGVSZXF1ZXN0IiwiX3RoaXMiLCJhZGQiLCJuYW1lIiwidG9PYmplY3QiLCJlbnRyeSIsIl90aGlzMiIsImdldEFsbE1hdGNoaW5nIiwiSURCS2V5UmFuZ2UiLCJvbmx5IiwiZGVsZXRlIiwicHJpbWFyeUtleSIsInF1ZXVlTmFtZXMiLCJTZXQiLCJRdWV1ZSIsImNhbGxiYWNrcyIsIm1heFJldGVudGlvblRpbWUiLCJoYXMiLCJXb3JrYm94RXJyb3IiLCJfbmFtZSIsIl9jYWxsYmFja3MiLCJfbWF4UmV0ZW50aW9uVGltZSIsIl9xdWV1ZVN0b3JlIiwiX2FkZFN5bmNMaXN0ZW5lciIsImZyb21SZXF1ZXN0IiwiX3J1bkNhbGxiYWNrIiwiYWRkRW50cnkiLCJfcmVnaXN0ZXJTeW5jIiwicmVwbGF5ZWRSZXF1ZXN0cyIsImZhaWxlZFJlcXVlc3RzIiwiZ2V0QW5kUmVtb3ZlT2xkZXN0RW50cnkiLCJyZXBsYXkiLCJ0b1JlcXVlc3QiLCJyZXNwb25zZSIsImZldGNoIiwiZXJyIiwiZXJyb3IiLCJwdXNoIiwibGVuZ3RoIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImFyZ3MiLCJfdGhpczMiLCJhcHBseSIsInJlZ2lzdHJhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIndhaXRVbnRpbCIsInJlcGxheVJlcXVlc3RzIiwic3luYyIsInJlZ2lzdGVyIiwiX3RoaXM0IiwiUXVldWVQbHVnaW4iLCJmZXRjaERpZEZhaWwiLCJiaW5kIiwiYWRkUmVxdWVzdCJdLCJtYXBwaW5ncyI6InFGQUFBLFNBQVNBLFFBQVFDLEVBQUUseUNBQXlDLEVBQUcsTUFBTUMsSUNlckUsTUFFTUMsR0FDSixTQUNBLFdBQ0EsaUJBQ0EsT0FDQSxjQUNBLFFBQ0EsV0FDQSxZQUNBLFlBQ0EsZ0JBVW1CQyxxQkFRTUMsMERBQ2pCQyxHQUFlQyxZQUdFLFFB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"}